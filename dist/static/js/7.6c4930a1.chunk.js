(this["webpackJsonpnft-wallet"]=this["webpackJsonpnft-wallet"]||[]).push([[7],{1371:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return S}));var r=t(2),c=t.n(r),i=t(5),s=t(11),a=t(13),o=t(28),l=t(29),d=t(0),u=t.n(d),p=t(1364),h=t(18),f=t(12),v=t.p+"static/media/scan-error.c173f42a.png",x=t(109),j=t(612),g=t(30),b=t(611),m=t(3),w=t(1),O=h.a.div.withConfig({displayName:"QRcodeScaner__Container",componentId:"sc-1vxk7gb-0"})(["display:flex;height:100%;width:",";flex-direction:column;video{max-width:100%;margin-bottom:20px;}p{margin:0;text-align:center;font-size:14px;&.white{color:white;}}.dot{height:5px;width:5px;background-color:white;border-radius:50%;display:inline-block;}.result{margin:0 36px;margin-top:-44px;display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;img{width:220px;}p{font-size:12px;line-height:16px;margin:0;margin-top:12px;}.warn{color:#f77d48;}.detect{color:#4c4c4c;}.content{color:#4c4c4c;opacity:0.8;}button{margin-top:32px;}}"],(function(e){return void 0!==e.width?"".concat(e.width,"px"):"375px"})),S=function(e){Object(o.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).videoRef=u.a.createRef(),e.currentDeviceId=null,e.scaner=null,e.state={nonAddressResult:"",isScaning:!1},e.facingMode="environment",e.toggle=Object(i.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.startScan(!0);case 2:case"end":return n.stop()}}),n)}))),e}return Object(a.a)(t,[{key:"isSupportedFacingMode",value:function(){var e,n,t,r,c;return null!==(e=null===(n=navigator)||void 0===n||null===(t=n.mediaDevices)||void 0===t||null===(r=t.getSupportedConstraints)||void 0===r||null===(c=r.call(t))||void 0===c?void 0:c.facingMode)&&void 0!==e&&e}},{key:"startScan",value:function(){var e=Object(i.a)(c.a.mark((function e(){var n,t,r,i,s,a,o,l,d,u,h,v,x=this,j=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.length>0&&void 0!==j[0]&&j[0],i=this.props,s=i.onDecode,a=i.onDecodeError,o=i.onScanCkbAddress,null===this.scaner&&(this.scaner=new p.BrowserQRCodeReader),r&&this.scaner.reset(),e.next=6,this.scaner.listVideoInputDevices();case 6:l=e.sent,d=null!==(n=null===(t=l.find((function(e){var n=e.label.toLowerCase();return n.includes("back")||n.includes("\u540e")})))||void 0===t?void 0:t.deviceId)&&void 0!==n?n:l[0].deviceId,null===this.currentDeviceId&&(this.currentDeviceId=d),r&&(d=null!==(u=null===(h=l.find((function(e){return e.deviceId!==x.currentDeviceId})))||void 0===h?void 0:h.deviceId)&&void 0!==u?u:d),this.currentDeviceId=d,v=function(e){if(null!=e){var n=e.getText().replace(/^ethereum:/,"");null===s||void 0===s||s(n),x.setState({isScaning:!1}),Object(f.w)(n)||Object(f.z)(n)||Object(f.x)(n)?(x.setState({nonAddressResult:""}),o(n)):x.setState({nonAddressResult:n}),x.stopScan()}},this.setState({nonAddressResult:"",isScaning:!0},(function(){var e;x.isSupportedFacingMode()?(null===(e=x.scaner)||void 0===e||e.decodeFromConstraints({video:{facingMode:x.facingMode}},x.videoRef.current,v),x.facingMode="environment"===x.facingMode?"user":"environment"):x.scaner.decodeOnceFromVideoDevice(d,x.videoRef.current).then(v).catch(a)}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.stopScan()}},{key:"componentDidMount",value:function(){this.startScan()}},{key:"stopScan",value:function(){var e;null===(e=this.scaner)||void 0===e||e.reset(),this.scaner=null,this.setState({isScaning:!1})}},{key:"render",value:function(){var e=this,n=this.state,t=n.nonAddressResult,r=n.isScaning,s=this.props,a=s.onCancel,o=s.isDrawerOpen,l=s.width,d=s.t;return Object(w.jsx)(m.h,{isOpen:o,onClose:a,placement:"left",hasOverlay:!0,contentProps:{padding:0,width:l,backgroundColor:r?"#000":"#fff"},bodyProps:{padding:0,width:l},children:Object(w.jsxs)(O,{width:l,style:{backgroundColor:r?"#000":"#fff"},children:[Object(w.jsx)(g.a,{left:Object(w.jsx)(g.b,{onClick:a,children:Object(w.jsx)(x.a,{})}),transparent:!0,title:""===t?"":d("transfer.scan.result"),right:r?Object(w.jsx)(g.b,{onClick:this.toggle,children:Object(w.jsx)(j.a,{})}):null}),r?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("video",{ref:this.videoRef}),Object(w.jsxs)("div",{style:{textAlign:"center"},children:[Object(w.jsx)("p",{className:"white",children:d("transfer.scan.qrcode")}),Object(w.jsx)("p",{style:{lineHeight:"10px"},children:Object(w.jsx)("span",{className:"dot"})})]})]}):null,""===t?null:Object(w.jsxs)("div",{className:"result",children:[Object(w.jsx)("img",{src:v,alt:d("transfer.scan.error")}),Object(w.jsx)("p",{className:"warn",children:d("transfer.scan.error")}),Object(w.jsx)("p",{className:"detect",children:d("transfer.scan.detected")}),Object(w.jsx)("p",{className:"content",children:t}),Object(w.jsx)(b.a,{onClick:Object(i.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.startScan();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),children:d("transfer.scan.rescan")})]})]})})}}]),t}(u.a.Component)}}]);
//# sourceMappingURL=7.6c4930a1.chunk.js.map