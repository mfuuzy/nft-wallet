{"version":3,"sources":["../node_modules/pingpp-js/src/utils.js","../node_modules/pingpp-js/src/callbacks.js","../node_modules/pingpp-js/src/stash.js","../node_modules/pingpp-js/src/mods.js","../node_modules/pingpp-js/src/channels/commons/redirect_base.js","../node_modules/pingpp-js/src/channels/wx_lite.js","../node_modules/pingpp-js/src/channels/wx_pub.js","../node_modules/pingpp-js/src/payment_elements.js","../node_modules/pingpp-js/src/errors.js","../node_modules/pingpp-js/src/version.js","../node_modules/pingpp-js/src/init.js","../node_modules/pingpp-js/src/testmode.js","../node_modules/pingpp-js/src/channels/alipay.js","../node_modules/pingpp-js/src/channels/alipay_lite.js","../node_modules/pingpp-js/src/channels/alipay_pc_direct.js","../node_modules/pingpp-js/src/channels/alipay_qr.js","../node_modules/pingpp-js/src/channels/alipay_qr_lakala.js","../node_modules/pingpp-js/src/channels/alipay_wap.js","../node_modules/pingpp-js/src/channels/alipay_wap_lakala.js","../node_modules/pingpp-js/src/channels/bfb_wap.js","../node_modules/pingpp-js/src/channels/cb_alipay_pc_direct.js","../node_modules/pingpp-js/src/channels/cb_alipay_wap.js","../node_modules/pingpp-js/src/channels/cb_wx_pub.js","../node_modules/pingpp-js/src/channels/ccb_qr.js","../node_modules/pingpp-js/src/channels/ccb_wap.js","../node_modules/pingpp-js/src/channels/cmb_pc_qr.js","../node_modules/pingpp-js/src/channels/cmb_wallet.js","../node_modules/pingpp-js/src/channels/coolcredit.js","../node_modules/pingpp-js/src/channels/cp_b2b.js","../node_modules/pingpp-js/src/channels/isv_lite.js","../node_modules/pingpp-js/src/channels/isv_wap.js","../node_modules/pingpp-js/src/channels/jdpay_wap.js","../node_modules/pingpp-js/src/channels/pab_pc.js","../node_modules/pingpp-js/src/channels/paypal.js","../node_modules/pingpp-js/src/channels/qpay_pub.js","../node_modules/pingpp-js/src/channels/upacp_b2b.js","../node_modules/pingpp-js/src/channels/upacp_pc.js","../node_modules/pingpp-js/src/channels/upacp_wap.js","../node_modules/pingpp-js/src/channels/wx_lite_pab.js","../node_modules/pingpp-js/src/channels/wx_pub_hzbank.js","../node_modules/pingpp-js/src/channels/wx_pub_pab.js","../node_modules/pingpp-js/src/channels/wx_wap.js","../node_modules/pingpp-js/src/channels/yeepay_wap.js","../node_modules/pingpp-js/src/channels/extras/ap.js","../node_modules/pingpp-js/src/agreement.js","../node_modules/pingpp-js/src/main.js"],"names":["callbacks","require","hasOwn","hasOwnProperty","utils","module","exports","stringifyData","data","channel","urlencode","output","i","call","push","encodeURIComponent","join","request","url","method","requestData","successCallback","errorCallback","headers","XMLHttpRequest","xhr","timeout","toUpperCase","open","k","setRequestHeader","send","JSON","stringify","onreadystatechange","readyState","responseText","status","onerror","e","formSubmit","params","window","form","document","createElement","key","setAttribute","hiddenField","appendChild","body","submit","randomString","length","chars","maxPos","str","charAt","Math","floor","random","redirectTo","shouldReturnUrlByCallback","triggerUrlReturnCallback","location","href","inWeixin","navigator","userAgent","toLowerCase","indexOf","inAlipay","inWxLite","wx","miniProgram","requestPayment","inAlipayLite","my","tradePay","documentReady","fn","addEventListener","loadUrlJs","sid","jsurl","callback","nodeHead","getElementsByTagName","nodeScript","getElementById","async","onload","ready","userCallback","undefined","urlReturnCallback","urlReturnChannels","userAgreementCallback","innerCallback","result","err","this","error","clear","msg","extra","innerAgreementCallback","mods","channels","alipay","alipay_lite","alipay_pc_direct","alipay_qr","alipay_qr_lakala","alipay_wap","alipay_wap_lakala","bfb_wap","cb_alipay_pc_direct","cb_alipay_wap","cb_wx_pub","ccb_qr","ccb_wap","cmb_pc_qr","cmb_wallet","coolcredit","cp_b2b","isv_lite","isv_wap","jdpay_wap","pab_pc","paypal","qpay_pub","upacp_b2b","upacp_pc","upacp_wap","wx_lite","wx_lite_pab","wx_pub","wx_pub_hzbank","wx_pub_pab","wx_wap","yeepay_wap","extras","ap","agreement","getChannelModule","getExtraModule","name","handleCharge","charge","targetURL","credential","stash","PINGPP_NOTIFY_URL_BASE","fields","jsApiParameters","callpay","wxLiteEnabled","appId","complete","res","errMsg","err_code","err_desc","runTestMode","path","id","success","fail","self","wx_jssdk","jssdkEnabled","WeixinJSBridge","eventCallback","jsApiCall","attachEvent","invoke","err_msg","confirm","PingppError","Error","or_id","app","livemode","order_no","time_expire","paid","actual_amount","init","charge_or_order","parse","object","merchant_order_no","charge_essentials","charges","message","v","initPuid","localStorage","puid","getItem","setItem","PINGPP_MOCK_URL","orderNo","timeExpire","orderInfo","alipayLiteEnabled","orderStr","alipayLitePay","test","swuserAgent","waitAlipayJSBridgde","alipayJsBridgePay","AlipayJSBridge","alipayResultHandler","tradePayParams","resultCode","memo","httpRequest","trade_no","tradeNO","ALIPAY_PC_DIRECT_URL","baseURL","channel_url","service","_input_charset","query","transaction_no","redirectBase","ALIPAY_WAP_URL_OLD","ALIPAY_WAP_URL","pay","CCB_WAP_URL_BASE","CMB_WALLET_URL","request_url","ChannelUrl","channelVersion","request_data","CP_B2B_URL","wxLite","pay_channel","JDPAY_WAP_URL_OLD","JDPAY_H5_URL","JDPAY_PC_URL","channelUrl","SRC_URL","ID","tokenId","token_id","mqq","QQVersion","tenpay","retmsg","UPACP_PC_URL","UPACP_WAP_URL","wxPub","YEEPAY_WAP_URL","YEEPAY_WAP_TEST_URL","mode","b","a","DOMException","INVALID_CHARACTER_ERR","d","c","code","number","description","toString","ALPHA","makeDOMException","f","h","g","j","getbyte64","PADCHAR","String","fromCharCode","charCodeAt","arguments","SyntaxError","getbyte","encode","APURL","decode","decodeURIComponent","signAgreement","agreementObj","urlToOpen","substring","URL","search","setTimeout","version","PingppSDK","prototype","testmode","payment_elements","createPayment","chargeJSON","signature","debug","app_id","channelModule","setAPURL","setUrlReturnCallback","Array","isArray"],"mappings":"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","file":"static/js/4.dec5c5ae.chunk.js","sourcesContent":["var callbacks = require('./callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nvar utils = module.exports = {\n\n  /**\n   * 对象转换成 query string\n   * @param object data  待转对象\n   * @param string channel  渠道\n   * @param boolean urlencode  是否需要 urlencode\n   *\n   * @return string query string\n   */\n  stringifyData: function (data, channel, urlencode) {\n    if (typeof urlencode == 'undefined') {\n      urlencode = false;\n    }\n    var output = [];\n    for (var i in data) {\n      if (!hasOwn.call(data, i) || typeof data[i] === 'function') {\n        continue;\n      }\n      if (channel == 'bfb_wap' && i == 'url') {\n        continue;\n      }\n      if (channel == 'yeepay_wap' && i == 'mode') {\n        continue;\n      }\n      if (i == 'channel_url') {\n        continue;\n      }\n      output.push(i + '=' +\n          (urlencode ? encodeURIComponent(data[i]) : data[i]));\n    }\n    return output.join('&');\n  },\n\n  /**\n   * 网络请求\n   * @param string url\n   * @param string method  请求方式, POST, GET ...\n   * @param object requestData  请求数据\n   * @param function successCallback  成功回调 (data, statusCode, xhr)\n   * @param function errorCallback  错误回调 (xhr, statusCode, error)\n   */\n  request: function (url, method, requestData,\n    successCallback, errorCallback, headers) {\n    if (typeof XMLHttpRequest === 'undefined') {\n      console.log('Function XMLHttpRequest is undefined.');\n      return;\n    }\n    var xhr = new XMLHttpRequest();\n    if (typeof xhr.timeout !== 'undefined') {\n      xhr.timeout = 6000;\n    }\n    method = method.toUpperCase();\n\n    if (method === 'GET' && typeof requestData === 'object' && requestData) {\n      url += '?' + utils.stringifyData(requestData, '', true);\n    }\n    xhr.open(method, url, true);\n    if (typeof headers !== 'undefined') {\n      for (var k in headers) {\n        if (hasOwn.call(headers, k)) {\n          xhr.setRequestHeader(k, headers[k]);\n        }\n      }\n    }\n    if (method === 'POST') {\n      xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n      xhr.send(JSON.stringify(requestData));\n    } else {\n      xhr.send();\n    }\n    if (typeof successCallback == 'undefined') {\n      successCallback = function () {};\n    }\n    if (typeof errorCallback == 'undefined') {\n      errorCallback = function () {};\n    }\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        successCallback(xhr.responseText, xhr.status, xhr);\n      }\n    };\n    xhr.onerror = function (e) {\n      errorCallback(xhr, 0, e);\n    };\n  },\n\n  /**\n   * 表单提交\n   * @param string url\n   * @param string method  请求方式, POST, GET ...\n   * @param object params  请求数据\n   */\n  formSubmit: function (url, method, params) {\n    if (typeof window === 'undefined') {\n      console.log('Not a browser, form submit url: ' + url);\n      return;\n    }\n    var form = document.createElement('form');\n    form.setAttribute('method', method);\n    form.setAttribute('action', url);\n\n    for (var key in params) {\n      if (hasOwn.call(params, key)) {\n        var hiddenField = document.createElement('input');\n        hiddenField.setAttribute('type', 'hidden');\n        hiddenField.setAttribute('name', key);\n        hiddenField.setAttribute('value', params[key]);\n        form.appendChild(hiddenField);\n      }\n    }\n\n    document.body.appendChild(form);\n    form.submit();\n  },\n\n  randomString: function (length) {\n    if (typeof length == 'undefined') {\n      length = 32;\n    }\n    var chars =\n        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var maxPos = chars.length;\n    var str = '';\n    for (var i = 0; i < length; i++) {\n      str += chars.charAt(Math.floor(Math.random() * maxPos));\n    }\n\n    return str;\n  },\n\n  redirectTo: function (url, channel) {\n    if (callbacks.shouldReturnUrlByCallback(channel)) {\n      callbacks.triggerUrlReturnCallback(null, url);\n      return;\n    }\n    if (typeof window === 'undefined') {\n      console.log('Not a browser, redirect url: ' + url);\n      return;\n    }\n    window.location.href = url;\n  },\n\n  inWeixin: function () {\n    if (typeof navigator === 'undefined') {\n      return false;\n    }\n    var ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf('micromessenger') !== -1;\n  },\n\n  inAlipay: function () {\n    if (typeof navigator === 'undefined') {\n      return false;\n    }\n    var ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf('alipayclient') !== -1;\n  },\n\n  /*global wx*/\n  inWxLite: function() {\n    if(typeof wx === 'undefined') {\n      return false;\n    }\n    \n    return wx.miniProgram || wx.requestPayment;\n  },\n\n  /*global my*/\n  inAlipayLite: function() {\n    if(typeof my === 'undefined') {\n      return false;\n    }\n\n    return my.tradePay;\n  },\n\n  documentReady: function (fn) {\n    if (typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    if (document.readyState != 'loading') {\n      fn();\n    } else {\n      document.addEventListener('DOMContentLoaded', fn);\n    }\n  },\n\n  loadUrlJs: function (sid, jsurl, callback) {\n    var nodeHead = document.getElementsByTagName('head')[0];\n    var nodeScript = null;\n    if (document.getElementById(sid) == null) {\n      nodeScript = document.createElement('script');\n      nodeScript.setAttribute('type', 'text/javascript');\n      nodeScript.setAttribute('src', jsurl);\n      nodeScript.setAttribute('id', sid);\n      nodeScript.async = true;\n      if (callback != null) {\n        nodeScript.onload = nodeScript.onreadystatechange = function () {\n          if (nodeScript.ready) {\n            return false;\n          }\n\n          if (!nodeScript.readyState || nodeScript.readyState == 'loaded'\n              || nodeScript.readyState == 'complete') {\n            nodeScript.ready = true;\n            callback();\n          }\n        };\n      }\n      nodeHead.appendChild(nodeScript);\n    } else {\n      if (callback != null) {\n        callback();\n      }\n    }\n  }\n};\n","module.exports = {\n\n  userCallback: undefined,\n\n  urlReturnCallback: undefined,\n\n  urlReturnChannels: [\n    'alipay_pc_direct', // 默认只开启 alipay_pc_direct 使用 callback 返回 URL\n  ],\n\n  userAgreementCallback: undefined,\n\n  innerCallback: function(result, err) {\n    if (typeof this.userCallback === 'function') {\n      if (typeof err === 'undefined') {\n        err = this.error();\n      }\n      this.userCallback(result, err);\n      this.userCallback = undefined;\n      var payment_elements = require('./payment_elements');\n      payment_elements.clear();\n    }\n  },\n\n  error: function(msg, extra) {\n    msg = (typeof msg === 'undefined') ? '' : msg;\n    extra = (typeof extra === 'undefined') ? '' : extra;\n    return {\n      msg: msg,\n      extra: extra\n    };\n  },\n\n  triggerUrlReturnCallback: function (err, url) {\n    if (typeof this.urlReturnCallback === 'function') {\n      this.urlReturnCallback(err, url);\n    }\n  },\n\n  shouldReturnUrlByCallback: function (channel) {\n    if (typeof this.urlReturnCallback !== 'function') {\n      return false;\n    }\n    return this.urlReturnChannels.indexOf(channel) !== -1;\n  },\n\n  innerAgreementCallback: function(result, err) {\n    if (typeof this.userAgreementCallback === 'function') {\n      if (typeof err === 'undefined') {\n        err = this.error();\n      }\n      this.userAgreementCallback(result, err);\n      this.userAgreementCallback = undefined;\n    }\n  }\n};\n","module.exports = {\n};\n","var hasOwn = {}.hasOwnProperty;\nvar mods = {};\nmodule.exports = mods;\n\nmods.channels = {\n  alipay: require('./channels/alipay'),\n  alipay_lite: require('./channels/alipay_lite'),\n  alipay_pc_direct: require('./channels/alipay_pc_direct'),\n  alipay_qr: require('./channels/alipay_qr'),\n  alipay_qr_lakala: require('./channels/alipay_qr_lakala'),\n  alipay_wap: require('./channels/alipay_wap'),\n  alipay_wap_lakala: require('./channels/alipay_wap_lakala'),\n  bfb_wap: require('./channels/bfb_wap'),\n  cb_alipay_pc_direct: require('./channels/cb_alipay_pc_direct'),\n  cb_alipay_wap: require('./channels/cb_alipay_wap'),\n  cb_wx_pub: require('./channels/cb_wx_pub'),\n  ccb_qr: require('./channels/ccb_qr'),\n  ccb_wap: require('./channels/ccb_wap'),\n  cmb_pc_qr: require('./channels/cmb_pc_qr'),\n  cmb_wallet: require('./channels/cmb_wallet'),\n  coolcredit: require('./channels/coolcredit'),\n  cp_b2b: require('./channels/cp_b2b'),\n  isv_lite: require('./channels/isv_lite'),\n  isv_wap: require('./channels/isv_wap'),\n  jdpay_wap: require('./channels/jdpay_wap'),\n  pab_pc: require('./channels/pab_pc'),\n  paypal: require('./channels/paypal'),\n  qpay_pub: require('./channels/qpay_pub'),\n  upacp_b2b: require('./channels/upacp_b2b'),\n  upacp_pc: require('./channels/upacp_pc'),\n  upacp_wap: require('./channels/upacp_wap'),\n  wx_lite: require('./channels/wx_lite'),\n  wx_lite_pab: require('./channels/wx_lite_pab'),\n  wx_pub: require('./channels/wx_pub'),\n  wx_pub_hzbank: require('./channels/wx_pub_hzbank'),\n  wx_pub_pab: require('./channels/wx_pub_pab'),\n  wx_wap: require('./channels/wx_wap'),\n  yeepay_wap: require('./channels/yeepay_wap')\n};\n\nmods.extras = {\n  ap: require('./channels/extras/ap'),\n  agreement: require('./agreement')\n};\n\nmods.getChannelModule = function(channel) {\n  if (hasOwn.call(mods.channels, channel)) {\n    return mods.channels[channel];\n  }\n  return undefined;\n};\n\nmods.getExtraModule = function(name) {\n  if (hasOwn.call(mods.extras, name)) {\n    return mods.extras[name];\n  }\n  return undefined;\n};\n","var utils = require('../../utils');\nvar callbacks = require('../../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var targetURL;\n    if (typeof credential === 'string') {\n      targetURL = credential;\n    } else if (hasOwn.call(credential, 'url')) {\n      targetURL = credential.url;\n    } else {\n      callbacks.innerCallback('fail', callbacks.error('invalid_credential',\n        'credential format is incorrect'));\n      return;\n    }\n    utils.redirectTo(targetURL, charge.channel);\n  }\n};\n","/**\n * Created by yulitao on 2016/12/29.\n */\nvar stash = require('../stash');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n/*global wx*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://notify.pingxx.com/notify',\n\n  handleCharge: function (charge) {\n    var credential = charge.credential[charge.channel];\n    var fields = [\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\n    ];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    stash.jsApiParameters = credential;\n    this.callpay();\n  },\n\n  wxLiteEnabled: function () {\n    return typeof wx !== 'undefined' && wx.requestPayment;\n  },\n\n  //微信小程序支付\n  callpay: function () {\n    if (!this.wxLiteEnabled()) {\n      console.log('请在微信小程序中打开');\n      return;\n    }\n    var wx_lite = stash.jsApiParameters;\n    delete wx_lite.appId;\n    wx_lite.complete = function (res) {\n      //支付成功\n      if (res.errMsg === 'requestPayment:ok') {\n        callbacks.innerCallback('success');\n      }\n      //取消支付\n      if (res.errMsg === 'requestPayment:cancel'\n        || res.errMsg === 'requestPayment:fail cancel') {\n        callbacks.innerCallback('cancel', callbacks.error('用户取消支付'));\n      }\n      //支付验证签名失败\n      if (res.err_code !== 'undefined' && res.err_desc !== 'undefined') {\n        callbacks.innerCallback('fail', callbacks.error(res.err_desc, res));\n      }\n    };\n    wx.requestPayment(wx_lite);\n  },\n\n  runTestMode: function (charge) {\n    var path = '/charges/' + charge.id;\n    wx.request({\n      url: this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\n      success: function(res) {\n        if (res.data == 'success') {\n          callbacks.innerCallback('success');\n        } else {\n          callbacks.innerCallback('fail',\n            callbacks.error('testmode_notify_fail'));\n        }\n      },\n      fail:function() {\n        callbacks.innerCallback('fail', callbacks.error('network_err'));\n      }\n    });\n  }\n};\n","var callbacks = require('../callbacks');\nvar utils = require('../utils');\nvar stash = require('../stash');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\n/*global WeixinJSBridge*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://notify.pingxx.com/notify',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var fields = [\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\n    ];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    stash.jsApiParameters = credential;\n    this.callpay();\n  },\n\n  callpay: function() {\n    var self = this;\n    var wx_jssdk = mods.getExtraModule('wx_jssdk');\n    if (typeof wx_jssdk !== 'undefined' && wx_jssdk.jssdkEnabled()) {\n      wx_jssdk.callpay();\n    } else if (typeof WeixinJSBridge == 'undefined') {\n      var eventCallback = function() {\n        self.jsApiCall();\n      };\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady',\n          eventCallback, false);\n      } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', eventCallback);\n        document.attachEvent('onWeixinJSBridgeReady', eventCallback);\n      }\n    } else {\n      this.jsApiCall();\n    }\n  },\n\n  jsApiCall: function() {\n    if (hasOwn.call(stash, 'jsApiParameters')) {\n      WeixinJSBridge.invoke(\n        'getBrandWCPayRequest',\n        stash.jsApiParameters,\n        function(res) {\n          delete stash.jsApiParameters;\n          if (res.err_msg == 'get_brand_wcpay_request:ok') {\n            callbacks.innerCallback('success');\n          } else if (res.err_msg == 'get_brand_wcpay_request:cancel') {\n            callbacks.innerCallback('cancel');\n          } else {\n            callbacks.innerCallback('fail',\n              callbacks.error('wx_result_fail', res.err_msg));\n          }\n        }\n      );\n    }\n  },\n\n  runTestMode: function(charge) {\n    var dopay = confirm('模拟付款？');\n    if (dopay) {\n      var path = '/charges/' + charge.id;\n      utils.request(this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\n        'GET', null,\n        function(data, status) {\n          if (status >= 200 && status < 400 && data == 'success') {\n            callbacks.innerCallback('success');\n          } else {\n            var extra = 'http_code:' + status + ';response:' + data;\n            callbacks.innerCallback('fail',\n              callbacks.error('testmode_notify_fail', extra));\n          }\n        },\n        function() {\n          callbacks.innerCallback('fail', callbacks.error('network_err'));\n        });\n    }\n  }\n};\n","/**\n * Created by dong on 2016/12/30.\n */\n\nvar PingppError = require('./errors').Error;\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n  id: null,\n  or_id: null,\n  channel: null,\n  app: null,\n  credential: {},\n  extra: null,\n  livemode: null,\n  order_no: null,\n  time_expire: null,\n  paid: false,\n  status: null,\n  actual_amount: null,\n\n  init: function (charge_or_order) {\n    var charge;\n    if (typeof charge_or_order === 'string') {\n      try {\n        charge = JSON.parse(charge_or_order);\n      } catch (err) {\n        throw new PingppError('json_decode_fail', err);\n      }\n    } else {\n      charge = charge_or_order;\n    }\n\n    if (typeof charge === 'undefined') {\n      throw new PingppError('json_decode_fail');\n    }\n\n    if (hasOwn.call(charge, 'object') && charge.object == 'order') {\n      charge.or_id = charge.id;\n      charge.order_no = charge.merchant_order_no;\n      var charge_essentials = charge.charge_essentials;\n      charge.channel = charge_essentials.channel;\n      charge.credential = charge_essentials.credential;\n      charge.extra = charge_essentials.extra;\n      if(hasOwn.call(charge, 'charge') && charge.charge != null) {\n        charge.id = charge.charge;\n      } else if(hasOwn.call(charge_essentials, 'id')\n        && charge_essentials.id != null) {\n        charge.id = charge_essentials.id;\n      } else if(hasOwn.call(charge, 'charges')) {\n        for(var i = 0; i < charge.charges.data.length; i++){\n          if(charge.charges.data[i].channel === charge_essentials.channel) {\n            charge.id = charge.charges.data[i].id;\n            break;\n          }\n        }\n      }\n    } else if(hasOwn.call(charge, 'object') && charge.object == 'recharge') {\n      charge = charge.charge;\n    }\n\n    for (var key in this) {\n      if (hasOwn.call(charge, key)) {\n        this[key] = charge[key];\n      }\n    }\n    return this;\n  },\n\n  clear: function () {\n    for (var key in this) {\n      if (typeof this[key] !== 'function') {\n        this[key] = null;\n      }\n    }\n  }\n};","var error = function PingppError(message, extra) {\n  this.message = message;\n  this.extra = extra;\n};\n\nmodule.exports = {\n  Error: error,\n};\n","module.exports = {\n  v: '2.2.22'\n};\n","var stash = require('./stash');\nvar utils = require('./utils');\n\nmodule.exports = {\n  init: function() {\n    var self = this;\n    utils.documentReady(function(){\n      try {\n        (!(utils.inWxLite() || utils.inAlipayLite())) && self.initPuid();\n      } catch (e){/* empty */}\n    });\n  },\n\n  initPuid: function() {\n    if (typeof window === 'undefined' || typeof localStorage === 'undefined'\n        || localStorage === null) {\n      return;\n    }\n    var puid = localStorage.getItem('pingpp_uid');\n    if (puid === null) {\n      puid = utils.randomString();\n      try {\n        localStorage.setItem('pingpp_uid', puid);\n      } catch (e) {\n        /* empty */\n      }\n    }\n    stash.puid = puid;\n  }\n};\n","var utils = require('./utils');\nvar hasOwn = {}.hasOwnProperty;\nmodule.exports = {\n  PINGPP_MOCK_URL: 'http://sissi.pingxx.com/mock.php',\n\n  runTestMode: function (charge) {\n    var params = {\n      'ch_id': charge.id,\n      'scheme': 'http',\n      'channel': charge.channel\n    };\n\n    if (hasOwn.call(charge, 'order_no')) {\n      params.order_no = charge.order_no;\n    } else if (hasOwn.call(charge, 'orderNo')) {\n      params.order_no = charge.orderNo;\n    }\n    if (hasOwn.call(charge, 'time_expire')) {\n      params.time_expire = charge.time_expire;\n    } else if (hasOwn.call(charge, 'timeExpire')) {\n      params.time_expire = charge.timeExpire;\n    }\n    if (hasOwn.call(charge, 'extra')) {\n      params.extra = encodeURIComponent(JSON.stringify(charge.extra));\n    }\n    utils.redirectTo(\n      this.PINGPP_MOCK_URL + '?' + utils.stringifyData(params),\n      charge.channel\n    );\n  }\n};\n","var callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\n/*global my,AlipayJSBridge*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://notify.pingxx.com/notify',\n\n  handleCharge: function (charge) {\n    var credential = charge.credential[charge.channel];\n    if (credential || hasOwn.call(credential, 'orderInfo')) {\n      this.callpay(credential.orderInfo);\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_alipay'));\n    }\n  },\n\n  alipayLiteEnabled: function () {\n    return typeof my !== 'undefined' && my.tradePay;\n  },\n\n  // 支付宝小程序支付\n  callpay: function (orderStr) {\n    var self = this;\n    if (this.alipayLiteEnabled()) {\n      return this.alipayLitePay(orderStr);\n    }\n\n    if (typeof navigator !== 'undefined'\n      && /AlipayClient/.test(navigator.userAgent || navigator.swuserAgent)) {\n      return this.waitAlipayJSBridgde(function () {\n        self.alipayJsBridgePay(orderStr);\n      });\n    }\n\n    var errmsg = '请在支付宝小程序或者支付宝应用内中打开';\n    console.log(errmsg);\n    callbacks.innerCallback('fail', callbacks.error(errmsg));\n    return;\n  },\n\n  waitAlipayJSBridgde: function (callback) {\n    if (window.AlipayJSBridge) {\n      callback && callback();\n    } else {\n      document.addEventListener('AlipayJSBridgeReady', callback, false);\n    }\n  },\n\n  alipayJsBridgePay: function (orderStr) {\n    AlipayJSBridge.call('tradePay', {\n      orderStr: orderStr\n    }, this.alipayResultHandler);\n  },\n\n  alipayLitePay: function (orderStr) {\n    var tradePayParams = {};\n    tradePayParams.orderStr = orderStr;\n    tradePayParams.complete = this.alipayResultHandler;\n    my.tradePay(tradePayParams);\n  },\n\n  alipayResultHandler: function (res) {\n    var extra = {\n      resultCode: res.resultCode\n    };\n    if (hasOwn.call(res, 'memo')) {\n      extra.memo = res.memo;\n    }\n    if (hasOwn.call(res, 'result')) {\n      extra.result = res.result;\n    }\n    // 支付成功\n    if (res.resultCode == '9000') {\n      callbacks.innerCallback('success', callbacks.error('', extra));\n    } else if (res.resultCode == '6001') { // 取消支付\n      callbacks.innerCallback('cancel', callbacks.error('用户取消支付', extra));\n    } else {\n      callbacks.innerCallback('fail', callbacks.error('支付失败', extra));\n    }\n  },\n\n  runTestMode: function (charge) {\n    var path = '/charges/' + charge.id;\n    my.httpRequest({\n      url: this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\n      success: function(res) {\n        if (res.data == 'success') {\n          callbacks.innerCallback('success');\n        } else {\n          callbacks.innerCallback('fail',\n            callbacks.error('testmode_notify_fail'));\n        }\n      },\n      fail:function() {\n        callbacks.innerCallback('fail', callbacks.error('network_err'));\n      }\n    });\n  }\n};\n","var callbacks = require('../callbacks');\n\n/*global my*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://notify.pingxx.com/notify',\n\n  handleCharge: function (charge) {\n    var trade_no = charge.credential[charge.channel];\n    if (trade_no) {\n      this.callpay(trade_no);\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_alipay_lite'));\n    }\n  },\n\n  alipayLiteEnabled: function () {\n    return typeof my !== 'undefined' && my.tradePay;\n  },\n\n  //支付宝小程序支付\n  callpay: function (tradeNO) {\n    if (!this.alipayLiteEnabled()) {\n      console.log('请在支付宝小程序中打开');\n      return;\n    }\n    var alipay_lite = {};\n    alipay_lite.tradeNO = tradeNO;\n    alipay_lite.complete = function (res) {\n      //支付成功\n      if (res.resultCode == 9000) {\n        callbacks.innerCallback('success');\n      } else if (res.resultCode == 6001) { //取消支付\n        callbacks.innerCallback('cancel', callbacks.error('用户取消支付'));\n      } else {\n        callbacks.innerCallback('fail', callbacks.error('支付失败'));\n      }\n    };\n    my.tradePay(alipay_lite);\n  },\n\n  runTestMode: function (charge) {\n    var path = '/charges/' + charge.id;\n    my.httpRequest({\n      url: this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\n      success: function(res) {\n        if (res.data == 'success') {\n          callbacks.innerCallback('success');\n        } else {\n          callbacks.innerCallback('fail',\n            callbacks.error('testmode_notify_fail'));\n        }\n      },\n      fail:function() {\n        callbacks.innerCallback('fail', callbacks.error('network_err'));\n      }\n    });\n  }\n};\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_PC_DIRECT_URL: 'https://mapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_PC_DIRECT_URL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      if(hasOwn.call(credential, 'service')\n        && credential.service === 'create_direct_pay_by_user') {\n        credential._input_charset = 'utf-8';\n      }\n    }\n    var query = utils.stringifyData(credential, channel, true);\n    utils.redirectTo(baseURL + '?' + query, channel);\n  }\n};\n","var hasOwn = {}.hasOwnProperty;\nvar callbacks = require('../callbacks');\n\n/*global AlipayJSBridge*/\nmodule.exports = {\n\n  handleCharge: function (charge) {\n    var credential = charge.credential[charge.channel];\n    if (hasOwn.call(credential, 'transaction_no')) {\n      this.tradePay(credential.transaction_no);\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_field_transaction_no'));\n    }\n  },\n\n  ready: function (callback) {\n    if (window.AlipayJSBridge) {\n      callback && callback();\n    } else {\n      document.addEventListener('AlipayJSBridgeReady', callback, false);\n    }\n  },\n\n  tradePay: function (tradeNO) {\n    this.ready(function () {\n      // 通过传入交易号唤起快捷调用方式(注意tradeNO大小写严格)\n      AlipayJSBridge.call('tradePay', {\n        tradeNO: tradeNO\n      }, function (data) {\n        if ('9000' == data.resultCode) {\n          callbacks.innerCallback('success');\n        } else if('6001' == data.resultCode) {\n          callbacks.innerCallback('cancel', callbacks.error(data.result));\n        } else {\n          callbacks.innerCallback('fail',\n            callbacks.error(data.result));\n        }\n      });\n    });\n  }\n};\n","var redirectBase = require('./commons/redirect_base');\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    redirectBase.handleCharge(charge);\n  }\n};\n","var utils = require('../utils');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_WAP_URL_OLD: 'https://wappaygw.alipay.com/service/rest.htm',\n  ALIPAY_WAP_URL: 'https://mapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_WAP_URL;\n    if (hasOwn.call(credential, 'req_data')) {\n      baseURL = this.ALIPAY_WAP_URL_OLD;\n    } else if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      if ((hasOwn.call(credential, 'service')\n          && credential.service === 'alipay.wap.create.direct.pay.by.user')\n        || hasOwn.call(credential, 'req_data')\n      ) {\n        credential._input_charset = 'utf-8';\n      }\n    }\n    var query = utils.stringifyData(credential, channel, true);\n    var targetURL = baseURL + '?' + query;\n    var ap = mods.getExtraModule('ap');\n    if (utils.inWeixin() && typeof ap !== 'undefined') {\n      ap.pay(targetURL);\n    } else {\n      utils.redirectTo(targetURL, channel);\n    }\n  }\n};","var redirectBase = require('./commons/redirect_base');\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    redirectBase.handleCharge(charge);\n  }\n};\n","var utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n\n    if (!hasOwn.call(credential, 'url')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_field:url'));\n      return;\n    }\n    utils.redirectTo(credential.url + '?' +\n      utils.stringifyData(credential, channel), channel);\n  }\n};\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_PC_DIRECT_URL: 'https://intlmapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_PC_DIRECT_URL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n\n    if (!hasOwn.call(credential, '_input_charset')) {\n      if(hasOwn.call(credential, 'service')\n        && credential.service === 'create_forex_trade') {\n        credential._input_charset = 'utf-8';\n      }\n    }\n    var query = utils.stringifyData(credential, channel, true);\n\n    utils.redirectTo(baseURL + '?' + query, channel);\n  }\n};\n","var utils = require('../utils');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_WAP_URL: 'https://intlmapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_WAP_URL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      if ((hasOwn.call(credential, 'service')\n          && credential.service === 'create_forex_trade_wap')\n      ) {\n        credential._input_charset = 'utf-8';\n      }\n    }\n\n    var query = utils.stringifyData(credential, channel, true);\n    var targetURL = baseURL + '?' + query;\n    var ap = mods.getExtraModule('ap');\n    if (utils.inWeixin() && typeof ap !== 'undefined') {\n      ap.pay(targetURL);\n    } else {\n      utils.redirectTo(targetURL, channel);\n    }\n  }\n};\n","var callbacks = require('../callbacks');\nvar utils = require('../utils');\nvar stash = require('../stash');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\n/*global WeixinJSBridge*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://notify.pingxx.com/notify',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var fields = [\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\n    ];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    stash.jsApiParameters = credential;\n    this.callpay();\n  },\n\n  callpay: function() {\n    var self = this;\n    var wx_jssdk = mods.getExtraModule('wx_jssdk');\n    if (typeof wx_jssdk !== 'undefined' && wx_jssdk.jssdkEnabled()) {\n      wx_jssdk.callpay();\n    } else if (typeof WeixinJSBridge == 'undefined') {\n      var eventCallback = function() {\n        self.jsApiCall();\n      };\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady',\n          eventCallback, false);\n      } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', eventCallback);\n        document.attachEvent('onWeixinJSBridgeReady', eventCallback);\n      }\n    } else {\n      this.jsApiCall();\n    }\n  },\n\n  jsApiCall: function() {\n    if (hasOwn.call(stash, 'jsApiParameters')) {\n      WeixinJSBridge.invoke(\n        'getBrandWCPayRequest',\n        stash.jsApiParameters,\n        function(res) {\n          delete stash.jsApiParameters;\n          if (res.err_msg == 'get_brand_wcpay_request:ok') {\n            callbacks.innerCallback('success');\n          } else if (res.err_msg == 'get_brand_wcpay_request:cancel') {\n            callbacks.innerCallback('cancel');\n          } else {\n            callbacks.innerCallback('fail',\n              callbacks.error('wx_result_fail', res.err_msg));\n          }\n        }\n      );\n    }\n  },\n\n  runTestMode: function(charge) {\n    var dopay = confirm('模拟付款？');\n    if (dopay) {\n      var path = '/charges/' + charge.id;\n      utils.request(this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\n        'GET', null,\n        function(data, status) {\n          if (status >= 200 && status < 400 && data == 'success') {\n            callbacks.innerCallback('success');\n          } else {\n            var extra = 'http_code:' + status + ';response:' + data;\n            callbacks.innerCallback('fail',\n              callbacks.error('testmode_notify_fail', extra));\n          }\n        },\n        function() {\n          callbacks.innerCallback('fail', callbacks.error('network_err'));\n        });\n    }\n  }\n};\n","var redirectBase = require('./commons/redirect_base');\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    redirectBase.handleCharge(charge);\n  }\n};\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\nvar callbacks = require('../callbacks');\n\nmodule.exports = {\n\n  CCB_WAP_URL_BASE: 'https://ibsbjstar.ccb.com.cn/CCBIS/ccbMain?',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    if (!hasOwn.call(credential, 'orderinfo')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_field:orderinfo'));\n      return;\n    }\n\n    var targetURL = this.CCB_WAP_URL_BASE + credential['orderinfo'];\n    utils.redirectTo(targetURL, channel);\n  }\n};\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n      delete credential.channel_url;\n    }\n\n    utils.formSubmit(baseURL, 'post', credential);\n  }\n};\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  CMB_WALLET_URL:\n    'https://netpay.cmbchina.com/netpayment/BaseHttp.dll?MB_EUserPay',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var request_url = this.CMB_WALLET_URL;\n    if (hasOwn.call(credential, 'ChannelUrl')) {\n      request_url = credential.ChannelUrl;\n      delete credential.ChannelUrl;\n    }\n\n    if (hasOwn.call(credential, 'channelVersion')) {\n      delete credential.channelVersion;\n    }\n\n    utils.formSubmit(request_url, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(credential.request_url, 'post', credential.request_data);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  CP_B2B_URL: 'https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.CP_B2B_URL, 'post', credential);\n  }\n};\n","var wxLite = require('./wx_lite');\n\nmodule.exports = wxLite;\n","var redirectBase = require('./commons/redirect_base');\nvar callbacks = require('../callbacks');\nvar utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n  handleCharge: function (charge) {\n    var extra = charge.extra;\n    if (hasOwn.call(extra, 'pay_channel')) {\n      var pay_channel = extra.pay_channel;\n      if (pay_channel === 'wx' && !utils.inWeixin()) {\n        callbacks.innerCallback('fail',\n          callbacks.error('Not in the WeChat browser'));\n        return;\n      } else if (pay_channel === 'alipay' && !utils.inAlipay()) {\n        callbacks.innerCallback('fail',\n          callbacks.error('Not in the Alipay browser'));\n        return;\n      }\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'charge 格式不正确'));\n      return;\n    }\n    redirectBase.handleCharge(charge);\n  }\n};\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  JDPAY_WAP_URL_OLD: 'https://m.jdpay.com/wepay/web/pay',\n  JDPAY_H5_URL: 'https://h5pay.jd.com/jdpay/saveOrder',\n  JDPAY_PC_URL: 'https://wepay.jd.com/jdpay/saveOrder',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var request_url = this.JDPAY_H5_URL;\n    if (hasOwn.call(credential, 'channelUrl')) {\n      request_url = credential.channelUrl;\n      delete credential.channelUrl;\n    } else if (hasOwn.call(credential, 'merchantRemark')) {\n      request_url = this.JDPAY_WAP_URL_OLD;\n    }\n    utils.formSubmit(request_url, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var request_url = credential.channelUrl;\n    delete credential.channelUrl;\n\n    utils.formSubmit(request_url, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.redirectTo(credential, charge.channel);\n  }\n};\n","var callbacks = require('../callbacks');\nvar utils = require('../utils');\nvar stash = require('../stash');\nvar hasOwn = {}.hasOwnProperty;\n\n/*global mqq*/\nmodule.exports = {\n  SRC_URL: 'https://open.mobile.qq.com/sdk/qqapi.js?_bid=152',\n  ID: 'mqq_api',\n\n  handleCharge: function (charge) {\n    var credential = charge.credential[charge.channel];\n\n    if (!hasOwn.call(credential, 'token_id')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_token_id'));\n      return;\n    }\n    stash.tokenId = credential.token_id;\n    utils.loadUrlJs(this.ID, this.SRC_URL, this.callpay);\n  },\n\n  callpay: function () {\n    if (typeof mqq != 'undefined') {\n      if (mqq.QQVersion == 0) {\n        callbacks.innerCallback('fail',\n          callbacks.error('Not in the QQ client'));\n        delete stash.tokenId;\n        return;\n      }\n      mqq.tenpay.pay({\n        tokenId: stash.tokenId\n      }, function (result) {\n        if (result.resultCode == 0) {\n          callbacks.innerCallback('success');\n        } else {\n          callbacks.innerCallback('fail',\n            callbacks.error(result.retmsg));\n        }\n      });\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('network_err'));\n    }\n    delete stash.tokenId;\n  }\n};","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n      delete credential.channel_url;\n    }\n\n    utils.formSubmit(baseURL, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  UPACP_PC_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.UPACP_PC_URL, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  UPACP_WAP_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.UPACP_WAP_URL, 'post', credential);\n  }\n};\n","var wxLite = require('./wx_lite');\n\nmodule.exports = wxLite;\n","var wxPub = require('./wx_pub');\n\nmodule.exports = wxPub;\n","var wxPub = require('./wx_pub');\n\nmodule.exports = wxPub;\n","var utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    if (typeof credential === 'string') {\n      utils.redirectTo(credential, charge.channel);\n    } else if (typeof credential === 'object'\n      && hasOwn.call(credential, 'url')\n    ) {\n      utils.redirectTo(credential.url, charge.channel);\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential 格式不正确'));\n    }\n  }\n};\n","var utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  YEEPAY_WAP_URL: 'https://ok.yeepay.com/paymobile/api/pay/request',\n  YEEPAY_WAP_TEST_URL: 'http://mobiletest.yeepay.com/paymobile/api/pay/request',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var fields = ['merchantaccount', 'encryptkey', 'data'];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    var baseURL;\n    if (hasOwn.call(credential, 'mode') && credential.mode == 'test') {\n      baseURL = this.YEEPAY_WAP_TEST_URL;\n    } else {\n      baseURL = this.YEEPAY_WAP_URL;\n    }\n    utils.redirectTo(baseURL + '?' +\n      utils.stringifyData(credential, channel, true), charge.channel);\n  }\n};\n","var stash = require('../../stash');\nvar hasOwn = {}.hasOwnProperty;\n\n(function() {\n  var b = {};\n  var a = {};\n  a.PADCHAR = '=';\n  a.ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  a.makeDOMException = function() {\n    try {\n      return new DOMException(DOMException.INVALID_CHARACTER_ERR);\n    } catch (d) {\n      var c = new Error('DOM Exception 5');\n      c.code = c.number = 5;\n      c.name = c.description = 'INVALID_CHARACTER_ERR';\n      c.toString = function() {\n        return 'Error: ' + c.name + ': ' + c.message;\n      };\n      return c;\n    }\n  };\n  a.getbyte64 = function(e, d) {\n    var c = a.ALPHA.indexOf(e.charAt(d));\n    if (c === -1) {\n      throw a.makeDOMException();\n    }\n    return c;\n  };\n  a.decode = function(f) {\n    f = '' + f;\n    var j = a.getbyte64;\n    var h, e, g;\n    var d = f.length;\n    if (d === 0) {\n      return f;\n    }\n    if (d % 4 !== 0) {\n      throw a.makeDOMException();\n    }\n    h = 0;\n    if (f.charAt(d - 1) === a.PADCHAR) {\n      h = 1;\n      if (f.charAt(d - 2) === a.PADCHAR) {\n        h = 2;\n      }\n      d -= 4;\n    }\n    var c = [];\n    for (e = 0; e < d; e += 4) {\n      g = (j(f, e) << 18) |\n        (j(f, e + 1) << 12) |\n        (j(f, e + 2) << 6) |\n        j(f, e + 3);\n      c.push(String.fromCharCode(g >> 16, (g >> 8) & 255, g & 255));\n    }\n    switch (h) {\n      case 1:\n        g = (j(f, e) << 18) | (j(f, e + 1) << 12) | (j(f, e + 2) << 6);\n        c.push(String.fromCharCode(g >> 16, (g >> 8) & 255));\n        break;\n      case 2:\n        g = (j(f, e) << 18) | (j(f, e + 1) << 12);\n        c.push(String.fromCharCode(g >> 16));\n        break;\n    }\n    return c.join('');\n  };\n  a.getbyte = function(e, d) {\n    var c = e.charCodeAt(d);\n    if (c > 255) {\n      throw a.makeDOMException();\n    }\n    return c;\n  };\n  a.encode = function(f) {\n    if (arguments.length !== 1) {\n      throw new SyntaxError('Not enough arguments');\n    }\n    var g = a.PADCHAR;\n    var h = a.ALPHA;\n    var k = a.getbyte;\n    var e, j;\n    var c = [];\n    f = '' + f;\n    var d = f.length - f.length % 3;\n    if (f.length === 0) {\n      return f;\n    }\n    for (e = 0; e < d; e += 3) {\n      j = (k(f, e) << 16) | (k(f, e + 1) << 8) | k(f, e + 2);\n      c.push(h.charAt(j >> 18));\n      c.push(h.charAt((j >> 12) & 63));\n      c.push(h.charAt((j >> 6) & 63));\n      c.push(h.charAt(j & 63));\n    }\n    switch (f.length - d) {\n      case 1:\n        j = k(f, e) << 16;\n        c.push(h.charAt(j >> 18) + h.charAt((j >> 12) & 63) + g + g);\n        break;\n      case 2:\n        j = (k(f, e) << 16) | (k(f, e + 1) << 8);\n        c.push(h.charAt(j >> 18) +\n          h.charAt((j >> 12) & 63) +\n          h.charAt((j >> 6) & 63) + g);\n        break;\n    }\n    return c.join('');\n  };\n  b.url = 'pay.htm';\n  b.pay = function(d) {\n    var c = encodeURIComponent(a.encode(d));\n    if (hasOwn.call(stash, 'APURL')) {\n      b.url = stash.APURL;\n    }\n    location.href = b.url + '?goto=' + c;\n  };\n  b.decode = function(c) {\n    return a.decode(decodeURIComponent(c));\n  };\n\n  module.exports = b;\n})();\n","var hasOwn = {}.hasOwnProperty;\nvar callbacks = require('./callbacks');\nvar utils = require('./utils');\n\nmodule.exports = {\n  signAgreement: function (agreement) {\n    var agreementObj;\n    if (typeof agreement === 'string') {\n      try {\n        agreementObj = JSON.parse(agreement);\n      } catch (err) {\n        callbacks.innerAgreementCallback('fail',\n          callbacks.error('json_decode_fail', err));\n        return false;\n      }\n    } else {\n      agreementObj = agreement;\n    }\n\n    if (typeof agreementObj === 'undefined') {\n      callbacks.innerAgreementCallback('fail',\n        callbacks.error('json_decode_fail'));\n      return false;\n    }\n\n    if (!hasOwn.call(agreementObj, 'object')\n      || agreementObj.object !== 'agreement'\n      || !hasOwn.call(agreementObj, 'channel')\n      || !hasOwn.call(agreementObj, 'credential')\n      || typeof agreementObj.credential !== 'object'\n    ) {\n      callbacks.innerAgreementCallback('fail',\n        callbacks.error('invalid_object'));\n      return false;\n    }\n\n    if (!hasOwn.call(agreementObj.credential, agreementObj.channel)) {\n      callbacks.innerAgreementCallback('fail',\n        callbacks.error('invalid_credential'));\n      return false;\n    }\n\n    var credential = agreementObj.credential[agreementObj.channel];\n    var urlToOpen;\n    if (typeof credential === 'string') {\n      urlToOpen = credential;\n    } else if (hasOwn.call(credential, 'credential')\n      && typeof credential.credential === 'string'\n    ) {\n      urlToOpen = credential.credential;\n    }\n\n    if (typeof urlToOpen === 'undefined') {\n      callbacks.innerAgreementCallback('fail',\n        callbacks.error('invalid_credential'));\n      return false;\n    }\n\n    if (agreementObj.channel.substring(0, 6) === 'alipay') {\n      var url = new URL(urlToOpen);\n      urlToOpen = 'http://d.alipay.com/i/index.htm?iframeSrc='\n        + encodeURIComponent('alipays://platformapi/startapp?appId=60000157'\n          +'&appClearTop=false&startMultApp=YES&sign_params='\n          + encodeURIComponent(url.search.substring(1))\n        );\n    }\n\n    setTimeout(function() {\n      utils.redirectTo(urlToOpen);\n    }, 0);\n\n    return true;\n  }\n};","var version = require('./version').v;\nvar hasOwn = {}.hasOwnProperty;\n\nvar PingppSDK = function () {\n  require('./init').init();\n};\n\nPingppSDK.prototype.version = version;\n\nmodule.exports = new PingppSDK();\n\nvar testmode = require('./testmode');\nvar callbacks = require('./callbacks');\nvar PingppError = require('./errors').Error;\nvar mods = require('./mods');\nvar stash = require('./stash');\nvar payment_elements = require('./payment_elements');\n\nPingppSDK.prototype.createPayment = function (\n  chargeJSON, callback, signature, debug\n) {\n  if (typeof callback === 'function') {\n    callbacks.userCallback = callback;\n  }\n\n  try {\n    payment_elements.init(chargeJSON);\n  } catch (e) {\n    if (e instanceof PingppError) {\n      callbacks.innerCallback('fail',\n        callbacks.error(e.message, e.extra));\n      return;\n    } else {\n      throw e;\n    }\n  }\n\n  if (!hasOwn.call(payment_elements, 'id')) {\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_charge', 'no_charge_id'));\n    return;\n  }\n  if (!hasOwn.call(payment_elements, 'channel')) {\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_charge', 'no_channel'));\n    return;\n  }\n\n  if (hasOwn.call(payment_elements, 'app')) {\n    if (typeof payment_elements.app === 'string') {\n      stash.app_id = payment_elements.app;\n    } else if (typeof payment_elements.app === 'object' &&\n      typeof payment_elements.app.id === 'string') {\n      stash.app_id = payment_elements.app.id;\n    }\n  }\n  var channel = payment_elements.channel;\n  if (!hasOwn.call(payment_elements, 'credential')) {\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_charge', 'no_credential'));\n    return;\n  }\n  if (payment_elements.paid && payment_elements.actual_amount === 0) {\n    callbacks.innerCallback('success');\n    return;\n  }\n\n  if (!payment_elements.credential) {\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_credential', 'credential_is_undefined'));\n    return;\n  }\n  if (!hasOwn.call(payment_elements.credential, channel)) {\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_credential', 'credential_is_incorrect'));\n    return;\n  }\n  if (!hasOwn.call(payment_elements, 'livemode')) {\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_charge', 'no_livemode_field'));\n    return;\n  }\n  var channelModule = mods.getChannelModule(channel);\n  if (typeof channelModule === 'undefined') {\n    console.error('channel module \"' + channel + '\" is undefined');\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_channel',\n        'channel module \"' + channel + '\" is undefined')\n    );\n    return;\n  }\n  if (payment_elements.livemode === false) {\n    if (hasOwn.call(channelModule, 'runTestMode')) {\n      channelModule.runTestMode(payment_elements);\n    } else {\n      testmode.runTestMode(payment_elements);\n    }\n    return;\n  }\n\n  if (typeof signature != 'undefined') {\n    stash.signature = signature;\n  }\n  if (typeof debug == 'boolean') {\n    stash.debug = debug;\n  }\n  channelModule.handleCharge(payment_elements);\n};\n\nPingppSDK.prototype.setAPURL = function (url) {\n  stash.APURL = url;\n};\n\nPingppSDK.prototype.setUrlReturnCallback = function (callback, channels) {\n  if (typeof callback === 'function') {\n    callbacks.urlReturnCallback = callback;\n  } else {\n    throw 'callback need to be a function';\n  }\n\n  if (typeof channels !== 'undefined') {\n    if (Array.isArray(channels)) {\n      callbacks.urlReturnChannels = channels;\n    } else {\n      throw 'channels need to be an array';\n    }\n  }\n};\n\nPingppSDK.prototype.signAgreement = function (agreement, callback) {\n  if (typeof callback === 'function') {\n    callbacks.userAgreementCallback = callback;\n  }\n\n  var module = mods.getExtraModule('agreement');\n  if (typeof module === 'undefined') {\n    console.error('module \"agreement\" is undefined');\n    callbacks.innerCallback('fail',\n      callbacks.error('invalid_module',\n        'module \"agreement\" is undefined')\n    );\n    return false;\n  }\n\n  return module.signAgreement(agreement);\n};\n"],"sourceRoot":""}